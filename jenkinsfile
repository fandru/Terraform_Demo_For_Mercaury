pipeline {
   agent any
   stages {
    stage('clone-repos') {
      steps {
          
          dir ('repo1')
          {
               checkout([$class: 'GitSCM',
                branches: [[name: '*/dev']],
                extensions: [], 
                userRemoteConfigs: [[credentialsId: '68465bfa-5359-409f-bc8a-71b209a42298',
                url: 'https://github.com/fandru/Terraform_Demo_For_Mercaury.git']]])
                sh 'git config --global user.email "fnelsonanburaj.26@gmail.com"'
                
                sh 'git config --global user.name "fandru"'
                
                sh 'pwd'
               
                sh 'git init'
                sh 'git clone https://github.com/fandru/Terraform_Demo_For_Mercaury.git'
                
                sh 'echo "files checked out"'
          }    
          
          dir('destination1')
          {
              
               checkout([$class: 'GitSCM',
                branches: [[name: '*/qa']],
                extensions: [], 
                userRemoteConfigs: [[credentialsId: '68465bfa-5359-409f-bc8a-71b209a42298',
                url: 'https://github.com/fandru/gcs-demo-mercaury.git']]])
                sh 'ls -al'
                sh 'git config --global user.email "fnelsonanburaj.26@gmail.com"'
                
                sh 'git config --global user.name "fandru"'
               
                sh 'git clone https://github.com/fandru/gcs-demo-mercaury.git'    
                
                sh script:'''
                 #!/bin/bash
                 echo "This is start $(pwd)"
                 ls -al
                 cd ./gcs-demo-mercaury
                 echo "This is $(pwd)"
                 cd ../..
                 
                 cp -r repo1/Terraform_Demo_For_Mercaury/* destination1/gcs-demo-mercaury/
                 cd ./destination1/gcs-demo-mercaury
                 
                 ls -al
                 git add .
                 git commit -m "first commit"
                 git branch --show-current
                 git push origin main

                 '''
                
                                        
                
                sh 'echo "files pushed to QA"'


                            
                
                
                
              
              
          }
                
        
       }
    }
   }
}
